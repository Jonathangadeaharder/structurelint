# Example: Complete structurelint Setup
# Demonstrates all five phases working together
#
# This example shows the full power of structurelint:
# - Phase 0: Filesystem structure validation
# - Phase 1: Architectural layer enforcement
# - Phase 2: Dead code detection
# - Phase 3: Test validation
# - Phase 4: File content templates

root: true

# Entry points for orphan detection
entrypoints:
  - "src/index.ts"
  - "src/main.go"
  - "**/*test*"

# Architectural layers (Phase 1)
layers:
  - name: 'shared'
    path: 'src/shared/**'
    dependsOn: []

  - name: 'domain'
    path: 'src/domain/**'
    dependsOn: ['shared']

  - name: 'application'
    path: 'src/application/**'
    dependsOn: ['domain', 'shared']

  - name: 'presentation'
    path: 'src/presentation/**'
    dependsOn: ['application', 'domain', 'shared']

rules:
  # Phase 0: Filesystem Structure
  max-depth: { max: 7 }
  max-files-in-dir: { max: 20 }
  max-subdirs: { max: 10 }

  naming-convention:
    "src/**/*.ts": "camelCase"
    "src/**/*.tsx": "PascalCase"
    "src/components/**/": "PascalCase"

  file-existence:
    "index.ts|index.tsx": "exists:1"

  # Phase 1: Architectural Layer Enforcement
  enforce-layer-boundaries: true

  # Phase 2: Dead Code Detection
  disallow-orphaned-files: true
  disallow-unused-exports: true

  # Phase 3: Test Validation
  test-adjacency:
    pattern: "adjacent"
    file-patterns:
      - "**/*.ts"
      - "**/*.tsx"
    exemptions:
      - "**/*.d.ts"        # Type definitions
      - "**/index.ts"      # Re-exports
      - "**/*.config.ts"   # Configuration files

  test-location:
    integration-test-dir: "tests"
    allow-adjacent: true
    exemptions:
      - "testdata/**"

  # Phase 4: File Content Templates
  file-content:
    templates:
      "**/README.md": "readme"
      "docs/**/*.md": "documentation"

exclude:
  - node_modules/**
  - dist/**
  - build/**
  - .git/**

overrides:
  # Relaxed rules for test files
  - files: ['**/*test*', '**/__tests__/**']
    rules:
      disallow-orphaned-files: 0
      disallow-unused-exports: 0
      naming-convention: 0
